<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>Pembayaran Shinzou Store</title>
<meta name="theme-color" content="#071334">
<style>
  /* ===== Theme (Dark Blue) ===== */
  :root{
    --bg:#071324; --bg-soft:#0b1b3a; --txt:#eaf4ff; --muted:#9fb7d6;
    --accent:#0b61a4; --accent-2:#123a8b; --ok:#57ffb6; --warn:#ffb757; --err:#ff6d6d;
    --card:rgba(255,255,255,.035); --stroke:rgba(255,255,255,.08); --shadow:0 22px 60px rgba(2,12,30,.6);
    --glass: rgba(255,255,255,0.03);
    --btn-txt:#ffffff;
  }
  [data-theme="light"]{
    --bg:#f7fbff; --bg-soft:#eef5ff; --txt:#071324; --muted:#5b6a8a;
    --accent:#2b6cb0; --accent-2:#6b8bd4; --card:rgba(0,0,0,.04); --stroke:rgba(0,0,0,.08); --shadow:0 22px 50px rgba(6,30,60,.08);
  }

  /* ===== Reset & layout ===== */
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg, #041426 0%, var(--bg) 50%, #06122a 100%);
    color:var(--txt); padding:clamp(14px,2.5vw,28px); -webkit-font-smoothing:antialiased;
  }

  /* Animated subtle background glow */
  .bg-ef{
    position:fixed; inset:0; z-index:-2; pointer-events:none;
    background:
      radial-gradient(800px 400px at 10% 10%, rgba(18,58,139,0.18), transparent 30%),
      radial-gradient(700px 500px at 90% 80%, rgba(11,97,164,0.12), transparent 30%);
    mix-blend-mode:screen; filter:blur(14px);
  }

  .wrap{max-width:1040px; margin:0 auto; display:grid; gap:20px}
  .hero{display:flex; justify-content:space-between; align-items:center; gap:12px}
  .brand{display:flex; align-items:center; gap:12px}
  .logo{
    width:44px; height:44px; border-radius:10px; display:grid; place-items:center;
    color:var(--btn-txt); font-weight:800; font-size:15px;
    background: linear-gradient(135deg, var(--accent), var(--accent-2));
    box-shadow: 0 10px 30px rgba(11,97,164,0.18);
  }
  h1{margin:0; font-size:clamp(18px,2.4vw,28px)}
  .sub{margin:2px 0 0; color:var(--muted); font-size:13px}

  .toolbar{display:flex; gap:10px; align-items:center}
  .btn{
    display:inline-flex; gap:8px; align-items:center; padding:10px 14px; border-radius:12px;
    border:1px solid var(--stroke); background:var(--glass); color:var(--txt); cursor:pointer; font-weight:700;
    transition:transform .18s ease, box-shadow .18s ease, opacity .12s;
  }
  .btn:hover{transform:translateY(-3px)}
  .btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:var(--btn-txt); box-shadow:0 10px 30px rgba(11,97,164,0.22); border:0}

  .grid{display:grid; grid-template-columns: 1fr 1fr; gap:20px; margin-top:6px}
  @media (max-width:860px){ .grid{grid-template-columns:1fr} .hero{flex-direction:column; align-items:flex-start} }

  /* Card */
  .card{
    background:var(--card); border:1px solid var(--stroke); border-radius:16px; padding:18px;
    box-shadow:var(--shadow); position:relative; overflow:hidden; transition:transform .22s ease, box-shadow .22s ease;
  }
  .card:hover{transform:translateY(-6px); box-shadow:0 30px 80px rgba(2,12,30,.7)}
  .card h3{margin:0 0 6px; font-size:16px}
  .card p{margin:0 0 12px; color:var(--muted)}

  .pill{display:inline-flex; gap:8px; align-items:center; padding:6px 10px; border-radius:999px; border:1px solid var(--stroke); color:var(--muted); font-size:13px}

  /* QR block */
  .qr-wrap{display:flex; flex-direction:column; gap:12px; align-items:center}
  .qr{
    width:min(360px,86%); aspect-ratio:1; border-radius:14px; overflow:hidden; position:relative;
    background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));
    border:1px dashed rgba(255,255,255,.04); transition:transform .18s ease, box-shadow .18s ease;
  }
  .qr:hover{transform:translateY(-4px) scale(1.01); box-shadow:0 18px 50px rgba(11,97,164,.16)}
  .qr img{width:100%; height:100%; object-fit:cover; display:block}
  .skel{position:absolute; inset:0; background:linear-gradient(100deg, transparent, rgba(255,255,255,.08), transparent); animation:shine 1.3s infinite}
  @keyframes shine{from{transform:translateX(-100%)} to{transform:translateX(100%)}}

  .actions-row{display:flex; gap:10px; flex-wrap:wrap; justify-content:center}

  /* DANA styles */
  .mono{font-variant-numeric:tabular-nums; font-weight:800; padding:10px 14px; border-radius:12px; background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.02)); border:1px dashed rgba(255,255,255,.04); letter-spacing:.6px}
  .hint{font-size:13px; color:var(--muted)}

  /* Dialog styles */
  dialog{border:none; padding:0; border-radius:12px; background:var(--bg-soft); color:var(--txt); box-shadow:var(--shadow); width:min(92vw,560px)}
  dialog::backdrop{background:rgba(2,8,20,.6)}

  /* Toast */
  .toast{position:fixed; left:50%; bottom:22px; transform:translateX(-50%) translateY(14px); opacity:0; background:#071225; color:#c8f0ff; padding:12px 14px; border-radius:12px; border:1px solid rgba(11,97,164,.22); box-shadow:0 18px 50px rgba(2,12,30,.6); display:flex; gap:10px; align-items:center; transition:.22s}
  .toast.show{opacity:1; transform:translateX(-50%) translateY(0)}
  .dot{width:10px;height:10px;border-radius:50%; background:var(--ok); box-shadow:0 0 10px var(--ok)}

  /* small */
  .muted{color:var(--muted)}
</style>
</head>
<body
  data-theme="dark"
  data-brand="Shinzou Store"
  data-qris-src="https://files.catbox.moe/vau4h9.jpeg"
  data-dana="085189416130"
  data-receiver="ADI"
>
  <div class="bg-ef" aria-hidden="true"></div>

  <div class="wrap">
    <!-- header -->
    <header class="hero" role="banner">
      <div class="brand">
        <div class="logo" id="brandLogo">PAY</div>
        <div>
          <h1 id="brandTitle">Pembayaran For Shinzou</h1>
          <p class="sub">Scan QRIS atau Kirim Via DANA — Simple, Aman , Dan Cepat</p>
        </div>
      </div>

      <div class="toolbar" role="toolbar" aria-label="Aksi">
        <button class="btn" id="themeBtn" aria-label="Ganti tema">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M21 12.8A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.8Z" stroke="currentColor" stroke-width="1.6"/></svg>
          Tema
        </button>
        <button class="btn" id="accentBtn" aria-label="Ganti aksen warna">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M12 3v18M3 12h18" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
          Aksen
        </button>
        <button class="btn primary" id="shareBtn" aria-label="Bagikan">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M4 12v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7M16 6l-4-4-4 4M12 2v14" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Bagikan
        </button>
      </div>
    </header>

    <!-- main grid -->
    <main class="grid" role="main">
      <!-- left: DANA -->
      <section class="card" aria-labelledby="danaTitle">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
          <span class="pill">DANA</span>
          <span class="muted">Kirim langsung</span>
        </div>
        <h3 id="danaTitle">Pembayaran Via Dana</h3>
        <p class="muted" id="receiverLine">Penerima : <strong>—</strong></p>

        <div style="display:flex;gap:12px;align-items:center;margin-top:8px;margin-bottom:12px;flex-wrap:wrap">
          <span class="mono" id="danaNum">—</span>
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn primary" id="copyDana" aria-label="Salin nomor DANA">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><rect x="9" y="9" width="10" height="10" rx="2" stroke="currentColor" stroke-width="1.6"/><rect x="5" y="5" width="10" height="10" rx="2" stroke="currentColor" stroke-width="1.6"/></svg>
              Salin
            </button>
            <button class="btn" id="shareDana" aria-label="Bagikan nomor DANA">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M4 12v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7M16 6l-4-4-4 4M12 2v14" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
              Bagikan
            </button>
          </div>
        </div>

        <p class="hint">Setelah transfer, kirim bukti pembayaran agar cepat diproses.</p>
      </section>

      <!-- right: QRIS -->
      <section class="card" aria-labelledby="qrisTitle">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
          <span class="pill">QRIS</span>
          <span class="muted">Scan untuk bayar</span>
        </div>
        <h3 id="qrisTitle">Pembayaran Via QRIS</h3>

        <div class="qr-wrap">
          <div class="qr" id="qrCard" title="Klik untuk perbesar">
            <div class="skel" aria-hidden="true"></div>
            <img id="qrisImg" alt="Kode QRIS">
          </div>

          <div class="actions-row">
            <button class="btn" id="refreshQris" aria-label="Muat ulang QRIS">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M21 12a9 9 0 1 1-3.2-6.9M21 4v6h-6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
              Refresh
            </button>
            <button class="btn" id="downloadQris" aria-label="Unduh QRIS">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M12 3v12m0 0 4-4m-4 4-4-4M4 17v3a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-3" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
              Unduh
            </button>
            <button class="btn primary" id="fullscreenQris" aria-label="Perbesar QRIS">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M7 7h5M7 12V7h5M17 17h-5m5-5v5h-5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
              Perbesar
            </button>
          </div>

          <p class="hint">Jika QRIS tidak tampil, tekan Refresh atau cek koneksi.</p>
        </div>
      </section>
    </main>
  </div>

  <!-- fullscreen QR dialog -->
  <dialog id="qrDialog">
    <div style="padding:18px;display:grid;gap:12px">
      <h3 style="margin:0">QRIS — Tampilan Penuh</h3>
      <div style="display:grid;place-items:center">
        <img id="qrisBig" style="width:min(560px,92vw); border-radius:12px; border:1px dashed rgba(255,255,255,.04)">
      </div>
      <div style="display:flex;justify-content:flex-end;gap:10px">
        <button class="btn" id="closeDialog">Tutup</button>
        <button class="btn primary" id="dlBig">Unduh</button>
      </div>
    </div>
  </dialog>

  <!-- toast -->
  <div class="toast" id="toast"><span class="dot"></span><span id="toastMsg">Siap.</span></div>

<script>
  // helper
  const $ = (s,el=document)=> el.querySelector(s);
  const toast = $('#toast'), toastMsg = $('#toastMsg');
  function showToast(msg, kind='ok'){
    toastMsg.textContent = msg;
    const dot = toast.querySelector('.dot');
    dot.style.background = kind==='err' ? getComputedStyle(document.documentElement).getPropertyValue('--err') : (kind==='warn' ? getComputedStyle(document.documentElement).getPropertyValue('--warn') : getComputedStyle(document.documentElement).getPropertyValue('--ok'));
    toast.classList.add('show');
    clearTimeout(window.__tt); window.__tt = setTimeout(()=> toast.classList.remove('show'), 1700);
  }

  // confetti mini
  function confetti(){
    try{
      const c = document.createElement('canvas'); c.style.position='fixed'; c.style.left=0; c.style.right=0; c.style.bottom=0; c.style.zIndex=80; c.style.pointerEvents='none';
      c.width = innerWidth; c.height = 160; const ctx = c.getContext('2d'); document.body.appendChild(c);
      const parts = Array.from({length:48}, ()=>({x: Math.random()*c.width, y:c.height+Math.random()*40, s:6+Math.random()*8, vy:-(3+Math.random()*4), rot:Math.random()*Math.PI, vr:(Math.random()-.5)*.25, c:['#0b61a4','#123a8b','#57ffb6','#ffffff'][Math.floor(Math.random()*4)]}));
      let t=0; (function anim(){ t++; ctx.clearRect(0,0,c.width,c.height); parts.forEach(p=>{ p.y+=p.vy; p.vy+=0.05; p.rot+=p.vr; ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot); ctx.fillStyle=p.c; ctx.fillRect(-p.s/2,-p.s/2,p.s,p.s); ctx.restore(); }); if(t<72) requestAnimationFrame(anim); else c.remove(); })();
    }catch(e){}
  }

  // config (body data + localStorage)
  const loadCfg = ()=>{
    const d = document.body.dataset;
    const saved = JSON.parse(localStorage.getItem('payCfg') || '{}');
    // Give priority to body data-* attributes so inline defaults override previous localStorage
    return {
      theme: d.theme || saved.theme || 'dark',
      brand: d.brand || saved.brand || 'PAYMENT',
      qrisSrc: d.qrisSrc || saved.qrisSrc || '',
      dana: d.dana || saved.dana || '',
      receiver: d.receiver || saved.receiver || ''
    };
  };
  const saveCfg = (c)=> localStorage.setItem('payCfg', JSON.stringify(c));
  let CFG = loadCfg();

  // apply config to UI
  function applyCfg(){
    document.body.setAttribute('data-theme', CFG.theme || 'dark');
    $('#brandLogo').textContent = (CFG.brand||'PAY').slice(0,4).toUpperCase();
    $('#brandTitle').textContent = CFG.brand ? `Pembayaran • ${CFG.brand}` : 'Pembayaran • Dark Blue';
    $('#danaNum').textContent = CFG.dana || '—';
    $('#receiverLine').innerHTML = `Penerima: <strong>${CFG.receiver || '—'}</strong>`;

    // load QR
    const img = $('#qrisImg'); const skel = img.previousElementSibling;
    skel.style.display = 'block'; img.style.opacity = 0.01;
    const src = CFG.qrisSrc ? (CFG.qrisSrc + (CFG.qrisSrc.includes('?') ? '&' : '?') + 't=' + Date.now()) : '';
    img.onload = ()=>{ skel.style.display='none'; img.style.opacity=1; $('#qrisBig').src = img.src; };
    img.onerror = ()=>{ skel.style.display='none'; showToast('Gagal memuat QRIS','err'); };
    if(src) img.src = src; else { skel.style.display='none'; img.src=''; $('#qrisBig').src=''; }
  }
  applyCfg();

  // theme toggle
  $('#themeBtn').addEventListener('click', ()=>{
    CFG.theme = document.body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
    saveCfg(CFG); applyCfg(); showToast('Tema diperbarui');
  });

  // accent randomize (ke dark-blue palette)
  $('#accentBtn').addEventListener('click', ()=>{
    const palette = [
      ['#0b61a4','#123a8b'], ['#0f4c81','#1b6fb3'], ['#0b3d91','#1565c0'],
      ['#123a8b','#0b61a4']
    ];
    const p = palette[Math.floor(Math.random()*palette.length)];
    document.documentElement.style.setProperty('--accent', p[0]);
    document.documentElement.style.setProperty('--accent-2', p[1]);
    showToast('Warna aksen diperbarui');
  });

  // share basic
  $('#shareBtn').addEventListener('click', async ()=>{
    const txt = `Pembayaran ${CFG.brand || ''}\nDANA: ${CFG.dana || '-'}`;
    if(navigator.share){
      try{ await navigator.share({title:`Pembayaran ${CFG.brand||''}`, text:txt}); showToast('Dibagikan'); }catch(e){}
    }else{
      await navigator.clipboard.writeText(txt); showToast('Teks disalin untuk dibagikan');
    }
  });

  // DANA copy & share
  $('#copyDana').addEventListener('click', async ()=>{
    if(!CFG.dana) return showToast('Nomor DANA kosong','warn');
    try{ await navigator.clipboard.writeText(CFG.dana); confetti(); showToast('Nomor DANA disalin'); }catch(e){ showToast('Gagal salin','err') }
  });
  $('#shareDana').addEventListener('click', async ()=>{
    const txt = `Nomor DANA: ${CFG.dana || '-'}`;
    if(navigator.share){ try{ await navigator.share({title:'Pembayaran DANA', text:txt}); showToast('Dibagikan'); }catch(e){} }
    else{ try{ await navigator.clipboard.writeText(txt); showToast('Nomor disalin'); }catch(e){ showToast('Gagal membagikan','err') } }
  });

  // QR operations
  $('#refreshQris').addEventListener('click', ()=> { applyCfg(); showToast('QRIS dimuat ulang') });
  $('#downloadQris').addEventListener('click', ()=>{
    const src = $('#qrisImg').src;
    if(!src) return showToast('QRIS belum tersedia','warn');
    const a = document.createElement('a'); a.href = src; a.download = 'qris.png'; a.click();
    confetti(); showToast('QRIS terunduh');
  });

  // fullscreen QR modal
  const dlg = $('#qrDialog');
  $('#fullscreenQris').addEventListener('click', ()=>{
    const src = $('#qrisImg').src;
    if(!src) return showToast('QRIS belum tersedia','warn');
    $('#qrisBig').src = src; dlg.showModal();
  });
  $('#closeDialog').addEventListener('click', ()=> dlg.close());
  $('#dlBig').addEventListener('click', ()=> {
    const src = $('#qrisBig').src; if(!src) return;
    const a = document.createElement('a'); a.href = src; a.download = 'qris.png'; a.click();
  });
  $('#qrCard').addEventListener('click', ()=> $('#fullscreenQris').click());

  // close dialog by clicking outside
  dlg.addEventListener('click', e=>{ const r = dlg.getBoundingClientRect(); if(e.clientX<r.left||e.clientX>r.right||e.clientY<r.top||e.clientY>r.bottom) dlg.close(); });

  // keyboard accessibility fallback: ESC closes dialogs
  window.addEventListener('keydown', (e)=> { if(e.key === 'Escape'){ if(dlg.open) dlg.close(); } });

</script>
</body>
</html>
